<!DOCTYPE html>
<html lang="es">
<head>
    <!--/*===================================================
                        META TAGS
    =================================================== */-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Empleado - Slushy App</title>
    <link rel="icon" href="/images/Slushylogo.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/empleado-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!--/*===================================================
                        HEADER SECTION
    =================================================== */-->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="/images/Slushylogo.png" alt="Slushy App" class="logo-img">
                </div>               
                <div class="header-actions">
                    <a href="/logoutSlushy"  class="btn btn-primary">Salir</a>
                </div>
            </div>
        </div>
    </header>

    <!--/*===================================================
                        MOBILE MENU
    =================================================== */-->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-content">
            <button class="mobile-menu-close" id="mobileMenuClose">
                <i class="fas fa-times"></i>
            </button>
            <ul class="mobile-nav-list">
                <li><a href="index.html" class="mobile-nav-link">Inicio</a></li>
                <li><a href="servicios.html" class="mobile-nav-link">Servicios</a></li>
                <li><a href="vip.html" class="mobile-nav-link">Membresía VIP</a></li>
                <li><a href="recompensas.html" class="mobile-nav-link">Recompensas</a></li>
                <li><a href="contacto.html" class="mobile-nav-link">Contacto</a></li>
                <li><a href="#" class="mobile-nav-link">Mi Perfil</a></li>
            </ul>
        </div>
    </div>

    <!--/*===================================================
                        MAIN CONTENT
    =================================================== */-->
    <main class="employee-content">
        <!-- Employee Header -->
        <div class="employee-header">
            <div class="container">
                <div class="employee-title">
                    <i class="fas fa-user-tie"></i>
                    Panel de Empleado
                </div>
                
                <div class="employee-user">
                    <div class="employee-info">
                        <div class="employee-name">Roberto Sánchez</div>
                        <div class="employee-role">Operador</div>
                    </div>
                    <div class="employee-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <!--/*===================================================
                        EMPLOYEE TABS
            =================================================== */-->
            <div class="employee-tabs">
                <div class="employee-tab active" data-tab="queue">
                    <i class="fas fa-list"></i>
                    <span>Cola de Vehículos</span>
                </div>
                <div class="employee-tab" data-tab="active">
                    <i class="fas fa-spinner"></i> 
                    <span>Servicio Activo</span>
                </div>
                <div class="employee-tab" data-tab="history">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Mi Historial</span>
                </div>
            </div>
            
            <!--/*===================================================
                        QUEUE CONTENT TAB
            =================================================== */-->
            <div class="tab-content active" id="queue-content">
                <h2 class="section-title">Cola de Vehículos</h2>
                
                <div class="queue-grid">
                    <!-- Waiting Queue Card -->
                    <div class="queue-card">
                        <div class="queue-header">
                            <h3 class="queue-title">Pendiente</h3>
                            <span class="queue-count" id="pending-count">0</span>
                        </div>
                        <div class="queue-list" id="queue-pending-list">

                        </div>
                    </div>

                    <div style="text-align: center;">
                        <img src="/images/Slushylogo.png" alt="Slushy App" class="logo-img" style="width: 300px; height: auto; display: block; margin: 0 auto; margin-top: 100px;">
                    </div>

                    <!-- Confirmed Queue Card -->
                    <div class="queue-card">
                        <div class="queue-header">
                            <h3 class="queue-title">Confirmada</h3>
                            <span class="queue-count" id="confirmed-count">0</span>
                        </div>
                        <div class="queue-list" id="queue-confirmed-list">
                        </div>
                    </div>
                </div>
            </div>
            
            <!--/*===================================================
                        ACTIVE SERVICE TAB
            =================================================== */-->
            <div class="tab-content" id="active-content">
                <h2 class="section-title">Servicio Activo</h2>
                
                <div class="active-service">
                    <div class="active-service-header">
                        <h3 class="active-service-title">Toyota Corolla • Lavado Premium</h3>
                        <span class="active-service-status">En Proceso</span>
                    </div>
                    
                    <div class="active-service-grid">
                        <div class="active-service-info">
                            <div class="active-service-item">
                                <div class="active-service-icon">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div>
                                    <div class="active-service-label">Cliente</div>
                                    <div class="active-service-value">María González</div>
                                </div>
                            </div>
                            
                            <div class="active-service-item">
                                <div class="active-service-icon">
                                    <i class="fas fa-car"></i>
                                </div>
                                <div>
                                    <div class="active-service-label">Vehículo</div>
                                    <div class="active-service-value">Toyota Corolla (Sedán) • ABC-123</div>
                                </div>
                            </div>
                            
                            <div class="active-service-item">
                                <div class="active-service-icon">
                                    <i class="fas fa-list-check"></i>
                                </div>
                                <div>
                                    <div class="active-service-label">Servicio</div>
                                    <div class="active-service-value">Lavado Premium</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="active-service-info">
                            <div class="active-service-item">
                                <div class="active-service-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div>
                                    <div class="active-service-label">Hora de Inicio</div>
                                    <div class="active-service-value">10:30 AM</div>
                                </div>
                            </div>
                            
                            <div class="active-service-item">
                                <div class="active-service-icon">
                                    <i class="fas fa-hourglass-half"></i>
                                </div>
                                <div>
                                    <div class="active-service-label">Tiempo Estimado</div>
                                    <div class="active-service-value">40 minutos</div>
                                </div>
                            </div>
                            
                            <div class="active-service-item">
                                <div class="active-service-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div>
                                    <div class="active-service-label">Tiempo Restante</div>
                                    <div class="active-service-value">15 minutos</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="active-service-progress">
                        <div class="progress-header">
                            <span class="progress-label">Progreso del Servicio</span>
                            <span class="progress-value">60%</span>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: 60%;"></div>
                        </div>
                    </div>
                    
                    <div class="steps-container">
                        <h4 class="section-subtitle">Etapas del Proceso</h4>
                        
                        <!-- Step 1 -->
                        <div class="step-item completed">
                            <div class="step-icon">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="step-content">
                                <h4 class="step-title">Recepción</h4>
                                <p class="step-description">Vehículo recibido y en espera</p>
                                <div class="step-actions">
                                    <span>Completado a las 10:30 AM</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 2 -->
                        <div class="step-item completed">
                            <div class="step-icon">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="step-content">
                                <h4 class="step-title">Lavado con Espuma</h4>
                                <p class="step-description">Aplicación de espuma y detergente</p>
                                <div class="step-actions">
                                    <span>Completado a las 10:40 AM</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 3 -->
                        <div class="step-item active">
                            <div class="step-icon">
                                <i class="fas fa-wind"></i>
                            </div>
                            <div class="step-content">
                                <h4 class="step-title">Enjuague</h4>
                                <p class="step-description">Eliminación de espuma y suciedad</p>
                                <div class="step-actions">
                                    <button class="btn btn-primary" onclick="showCompleteStepAlert()">Marcar como Completado</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step 4 -->
                        <div class="step-item">
                            <div class="step-icon">
                                <i class="fas fa-sparkles"></i>
                            </div>
                            <div class="step-content">
                                <h4 class="step-title">Secado y Detalles</h4>
                                <p class="step-description">Secado manual y limpieza de detalles</p>
                            </div>
                        </div>
                        
                        <!-- Step 5 -->
                        <div class="step-item">
                            <div class="step-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="step-content">
                                <h4 class="step-title">Listo para Recoger</h4>
                                <p class="step-description">Vehículo listo y en espera de recogida</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="active-service-actions">
                        <button class="btn btn-primary" onclick="showFinishConfirmationModal()">Finalizar Servicio</button>
                    </div>
                </div>
            </div>
            
            <!--/*===================================================
                        HISTORY TAB
            =================================================== */-->
            <div class="tab-content" id="history-content">
                <h2 class="section-title">Mi Historial de Lavados</h2>
            
                <!-- Filters -->
                <div class="history-filters">
                    <div class="filter-group">
                        <label for="date-filter">Filtrar por:</label>
                        <select id="date-filter" class="filter-select">
                            <option value="today">Hoy</option>
                            <option value="week">Esta semana</option>
                            <option value="month" selected>Este mes</option>
                            <option value="all">Todos</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="status-filter">Estado:</label>
                        <select id="status-filter" class="filter-select">
                            <option value="all">Todos</option>
                            <option value="completed">Completados</option>
                            <option value="canceled">Cancelados</option>
                            <option value="rescheduled">Reprogramados</option>
                        </select>
                    </div>
                </div>
                
                <!-- History List -->
                <div class="history-list">
                    <!-- History Item 1 -->
                    <div class="history-item">
                        <div class="history-icon">
                            <i class="fas fa-car-wash"></i>
                        </div>
                        <div class="history-details">
                            <div class="history-title">Lavado Deluxe</div>
                            <div class="history-meta">
                                <span>Honda CR-V (XYZ-789)</span>
                                <span>•</span>
                                <span>02 Mayo, 2023 - 10:30 AM</span>
                                <span>•</span>
                                <span class="status completed">Completado</span>
                            </div>
                            <div class="history-stats">
                                <div class="stat">
                                    <i class="fas fa-clock"></i> 22 min
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i> 5.0
                                </div>
                            </div>
                        </div>
                        <div class="history-price">$24.99</div>
                    </div>
                    
                    <!-- History Item 2 -->
                    <div class="history-item">
                        <div class="history-icon">
                            <i class="fas fa-car-wash"></i>
                        </div>
                        <div class="history-details">
                            <div class="history-title">Lavado Premium</div>
                            <div class="history-meta">
                                <span>Toyota Corolla (ABC-123)</span>
                                <span>•</span>
                                <span>01 Mayo, 2023 - 03:15 PM</span>
                                <span>•</span>
                                <span class="status completed">Completado</span>
                            </div>
                            <div class="history-stats">
                                <div class="stat">
                                    <i class="fas fa-clock"></i> 18 min
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i> 4.5
                                </div>
                            </div>
                        </div>
                        <div class="history-price">$14.99</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!--/*===================================================
                        MODALS SECTION
    =================================================== */-->
    
    <!-- Details Modal -->
    <div class="modal" id="detailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalles del Servicio</h3>
                <button class="modal-close" onclick="closeModal('detailsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-row">
                    <span class="modal-label">Vehículo:</span>
                    <span class="modal-value" id="modal-vehicle"></span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Cliente:</span>
                    <span class="modal-value" id="modal-client"></span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Placa/Tipo:</span>
                    <span class="modal-value" id="modal-plate"></span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Servicio:</span>
                    <span class="modal-value" id="modal-service"></span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Hora:</span>
                    <span class="modal-value" id="modal-time"></span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Notas:</span>
                    <span class="modal-value" id="modal-notes"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('detailsModal')">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Finish Confirmation Modal -->
    <div class="modal" id="finishConfirmationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Finalizar Servicio</h3>
                <button class="modal-close" onclick="closeModal('finishConfirmationModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>¿Estás seguro que deseas marcar este servicio como completado?</p>
                <div class="form-group" style="margin-top: 1rem;">
                    <label for="finish-notes" class="modal-label">Notas finales:</label>
                    <textarea id="finish-notes" class="form-control" rows="3" placeholder="Opcional"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('finishConfirmationModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="showFinishSuccessAlert()">Confirmar Finalización</button>
            </div>
        </div>
    </div>

    <!-- Update Status Modal -->
    <div class="modal" id="updateStatusModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Actualizar Estado del Servicio</h3>
                <button class="modal-close" onclick="closeModal('updateStatusModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form class="modal-form">
                    <div class="form-group">
                        <label for="status-progress" class="modal-label">Progreso:</label>
                        <input type="range" id="status-progress" min="0" max="100" value="75" class="form-control">
                        <div class="progress-value-display">
                            <span id="progress-value">75%</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="status-notes" class="modal-label">Notas:</label>
                        <textarea id="status-notes" class="form-control" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('updateStatusModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="showUpdateStatusSuccessAlert()">Guardar Cambios</button>
            </div>
        </div>
    </div>

    <!--/*===================================================
                        ALERTS SECTION
    =================================================== */-->
    <div class="alert-notification" id="startServiceAlert">
        <div class="alert-content">
            <i class="fas fa-check-circle alert-icon"></i>
            <span class="alert-text">Servicio confirmado correctamente</span>
        </div>
    </div>

    <div class="alert-notification" id="completeStepAlert">
        <div class="alert-content">
            <i class="fas fa-check-circle alert-icon"></i>
            <span class="alert-text">Etapa marcada como completada</span>
        </div>
    </div>

    <div class="alert-notification" id="finishSuccessAlert">
        <div class="alert-content">
            <i class="fas fa-check-circle alert-icon"></i>
            <span class="alert-text">Servicio finalizado correctamente</span>
        </div>
    </div>

    <div class="alert-notification" id="rescheduleSuccessAlert">
        <div class="alert-content">
            <i class="fas fa-check-circle alert-icon"></i>
            <span class="alert-text">Servicio reprogramado correctamente</span>
        </div>
    </div>

    <div class="alert-notification" id="cancelSuccessAlert">
        <div class="alert-content">
            <i class="fas fa-check-circle alert-icon"></i>
            <span class="alert-text">Servicio cancelado correctamente</span>
        </div>
    </div>

    <div class="alert-notification" id="updateStatusSuccessAlert">
        <div class="alert-content">
            <i class="fas fa-check-circle alert-icon"></i>
            <span class="alert-text">Estado actualizado correctamente</span>
        </div>
    </div>

    <!--/*===================================================
                        SCRIPTS SECTION
    =================================================== */-->

    <script src="/js/empleado-funciones.js"></script>
    <script>
        
        // Tabs functionality
        const tabs = document.querySelectorAll('.employee-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // Remove active class from all tabs and contents
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to current tab and content
                this.classList.add('active');
                document.getElementById(tabId + '-content').classList.add('active');
            });
        });
        
        // Progress bar animation
        function updateProgress() {
            const progressBar = document.querySelector('.progress-bar');
            const progressValue = document.querySelector('.progress-value');
            let progress = 60;
            
            const interval = setInterval(() => {
                if (progress < 100) {
                    progress += 1;
                    progressBar.style.width = progress + '%';
                    progressValue.textContent = progress + '%';
                } else {
                    clearInterval(interval);
                }
            }, 3000);
        }
        
        // Call the function if we're on the active service tab
        if (document.getElementById('active-content').classList.contains('active')) {
            updateProgress();
        }

        // Modal Functions
        function showDetailsModal(vehicle, client, plate, service, time, notes) {
            document.getElementById('modal-vehicle').textContent = vehicle;
            document.getElementById('modal-client').textContent = client;
            document.getElementById('modal-plate').textContent = plate;
            document.getElementById('modal-service').textContent = service;
            document.getElementById('modal-time').textContent = time;
            document.getElementById('modal-notes').textContent = notes;
            document.getElementById('detailsModal').classList.add('active');
        }

        function showRescheduleModal() {
            document.getElementById('rescheduleModal').classList.add('active');
        }

        function showCancelConfirmationModal() {
            document.getElementById('cancelConfirmationModal').classList.add('active');
        }

        function showFinishConfirmationModal() {
            document.getElementById('finishConfirmationModal').classList.add('active');
        }

        function showUpdateStatusModal() {
            document.getElementById('updateStatusModal').classList.add('active');
            
            // Configure progress range
            const progressInput = document.getElementById('status-progress');
            const progressValue = document.getElementById('progress-value');
            
            progressInput.addEventListener('input', function() {
                progressValue.textContent = this.value + '%';
            });
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Alert Functions
        function showStartServiceAlert() {
            const alert = document.getElementById('startServiceAlert');
            alert.classList.add('show');
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        function showCompleteStepAlert() {
            const alert = document.getElementById('completeStepAlert');
            alert.classList.add('show');
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        function showFinishSuccessAlert() {
            closeModal('finishConfirmationModal');
            const alert = document.getElementById('finishSuccessAlert');
            alert.classList.add('show');
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        function showRescheduleSuccessAlert() {
            closeModal('rescheduleModal');
            const alert = document.getElementById('rescheduleSuccessAlert');
            alert.classList.add('show');
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        function showCancelSuccessAlert() {
            closeModal('cancelConfirmationModal');
            const alert = document.getElementById('cancelSuccessAlert');
            alert.classList.add('show');
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        function showUpdateStatusSuccessAlert() {
            closeModal('updateStatusModal');
            const alert = document.getElementById('updateStatusSuccessAlert');
            alert.classList.add('show');
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        //FUNCION PARA REDIRIGIR BOTONES CONFIRMAR E INICIAR SERVICIO
        function redirectToActiveContent() {
            // 1. Oculta todas las pestañas
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 2. Muestra solo la pestaña "Servicio Activo"
            document.getElementById('active-content').classList.add('active');
            
            // 3. (Opcional) Activa el tab correspondiente en el menú
            document.querySelectorAll('.employee-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector('.employee-tab[data-tab="active"]').classList.add('active');
            
            // 4. (Opcional) Muestra la alerta
            showStartServiceAlert(); // Si aún la necesitas
        }
    </script>
</body>
</html>